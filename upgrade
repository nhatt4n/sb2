rconsolename = 'Auto Uprade Item'
local Leg_item = {}
for i,v in next, game:GetService("ReplicatedStorage").Database.Items:GetChildren() do 
    if v:IsA('Folder') then 
        if v.Type then
            if v.Rarity.Value == 'Legendary' and (v.Type.Value == 'Weapon' or v.Type.Value == 'Clothing') then 
                --warn(v, '/ Type:',v.Type.Value,'/ Rarity', v.Rarity.Value)
                table.insert(Leg_item,v.Name)
            end
        end 
    end
end
occho = function() 
    local cac = false
    for i,v in next, game:GetService("ReplicatedStorage").Profiles[game:GetService('Players').LocalPlayer.Name].Inventory:GetChildren() do 
        if string.find(v.Name,'Legendary Upgrade Crystal') and v.Count.Value > 0 then 
            cac = true
        end
    end
    debug = function(text)
        rconsoleprint('\n[DEBUG] - ', text)
    end
    
    if cac then 
        for i,v in next, game:GetService("ReplicatedStorage").Profiles[game:GetService('Players').LocalPlayer.Name].Inventory:GetChildren() do 
            if table.find(Leg_item,v.Name) then
                if not (v:FindFirstChild('Upgrade')) then
                local ohString1 = "Equipment"
                        local ohTable2 = {
                            [1] = "Upgrade",
                            [2] = v,
                            [3] = false
                        }
                    game:GetService("ReplicatedStorage").Event:FireServer(ohString1, ohTable2) 
                end
            end
        end
        for i,v in next, game:GetService("ReplicatedStorage").Profiles[game:GetService('Players').LocalPlayer.Name].Inventory:GetChildren() do 
            if table.find(Leg_item,v.Name) then
                
                if v:FindFirstChild('Upgrade') and v:FindFirstChild('Upgrade').Value < 20 then
                    print(v)
                    spawn(function()
                      repeat
                        local ohString1 = "Equipment"
                        local ohTable2 = {
                            [1] = "Upgrade",
                            [2] = v,
                            [3] = false
                        }
                        game:GetService("ReplicatedStorage").Event:FireServer(ohString1, ohTable2)
                        wait(.1)
                      until v:FindFirstChild('Upgrade').Value >= 20 
                    end)
                    rconsoleprint(tostring(v.Name)..' Upgrade: '..tostring(v:FindFirstChild('Upgrade').Value)..' \n')
                end
            end
        end
        
        else
            rconsoleprint('Khong con du da Legendary \n')
    end
end
occho()
